Команды matlab:
1) start_command - передача даты и времени, запуск датчика
2) stop_command - остановка датчика
3) send_command - отправка данных в matlab, данные представляют собой три массива: accel - 3 оси акселерометра, gyro - 3 оси гироскопа, time_mark - временные метки после каждой передачи
4) erase_command - стирание последнего созданного файла

send_command и erase_command могут быть вызваны независимо от того, был ли включен датчик или нет (при наличии созданных ранее файлов)

Прерывание по UART:
1) при получении команды start_command запоминается время с начала работы микроконтроллера, записывается во флэш-память имя файла по переданной дате и времени из matlab, инициализируется датчик, опрашивается 10 раз с целью отсеить неверные показания сразу после запуска
2) при получении команды stop_command отключается прерывание от датчика
3) при получении команды send_command читается имя файла из флэш-памяти, этот файл открывается на SD, в matlab посылается сначала количество записей в файле, затем в цикле по этому количеству отправляются данные и временная метка
4) при получении команды erase_command читается имя файла из флэш-памяти, затем стирание этого файла

Прерывание по ножке INT датчика, прерывание на котором происходит, когда данные готовы к отправке:
после получения команды start_command читаются данные с датчика, открывается файл, и в него записываются полученные данные + временная метка

Последовательность отправки команд:
start_command -> stop_command -> send_command - в matlab отправятся все данные, записанные на SD за время между отправками start_command и stop_command 
send_command -> erase_command - в matlab отправятся все данны из последнего записанного файла, затем файл удаляется
